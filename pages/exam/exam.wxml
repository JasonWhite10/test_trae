<!-- pages/exam/exam.wxml -->
<view class="container">
  <view class="exam-progress">
    <view class="progress-text">第 {{currentQuestionIndex + 1}} 题 / 共 {{totalQuestions}} 题</view>
  </view>

  <view class="exam-container" wx:if="{{!isFinished}}">
    <view class="question-title">{{questions[currentQuestionIndex].title}}</view>

    <view wx:if="{{questions[currentQuestionIndex].hasImage}}">
      <image class="question-image" src="{{questions[currentQuestionIndex].image}}" mode="aspectFit"></image>
    </view>

    <view class="options-list">
      <view
        class="option-item {{selectedOptions[currentQuestionIndex] === index ? 'option-selected' : ''}}"
        wx:for="{{questions[currentQuestionIndex].options}}"
        wx:key="letter"
        data-index="{{index}}"
        bindtap="selectOption"
      >
        <view class="option-letter">{{item.letter}}</view>
        <view class="option-text">{{item.text}}</view>
      </view>
    </view>
  </view>

  <view class="navigation-buttons" style="display: flex; justify-content: space-between; margin: 30rpx 0;">
    <button class="btn-default" bindtap="prevQuestion" disabled="{{currentQuestionIndex === 0}}">上一题</button>
    <button class="btn-primary" bindtap="nextQuestion" disabled="{{currentQuestionIndex === totalQuestions - 1}}">下一题</button>
  </view>

  <button class="btn-primary" bindtap="submitExam" style="background-color: var(--warning-color);">提交试卷</button>
</view>